# PR34 â€“ PDF page cleanup and storage adoption

## Summary
- `ingest.upload_files` was leaving temporary PDF page PNGs behind when a duplicate was detected or when ingestion failed midway. It also wrote each page to disk twice (first during conversion, then again in FileStorage).
- `FileStorage` lacked a way to take ownership of an already-generated file, driving the double-write and forcing callers to implement manual cleanup.
- Tests needed updating to cover the new behaviour and to stub optional dependencies (`mysql.connector`, `flask_limiter`) so they run without external services.

## Fixes
1. Added `_cleanup_paths` helper in `backend/src/api/ingest.py` and used it to remove temporary files on success and failure, while tracking page paths per upload.
2. Introduced `FileStorage.adopt()` which atomically moves a file into managed storage and ensures idempotency. New unit test (`test_file_storage_adopt_is_idempotent`) verifies the behaviour.
3. Updated FirstCard invoice upload code to use `FileStorage.adopt()` and to clean up temp files during the pipeline.
4. Augmented `backend/tests/integration/test_invoice_upload_status.py` to stub `mysql.connector` and `flask_limiter`, and to provide realistic page objects (with `path`) so the new adoption logic can run inside tests.

## Verification
- `pytest backend/tests/unit/test_storage_service.py`
- `pytest backend/tests/integration/test_invoice_upload_status.py`

All tests pass locally.
